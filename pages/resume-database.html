<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Resume Database - Catalyst HR</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <link rel="stylesheet" href="../css/styles.css">
    <link rel="shortcut icon" href="../img/image.png" type="image/x-icon">
</head>
<body class="hr-page">
    <!-- Navigation will be loaded dynamically -->

    <main class="py-5 mt-4">
        <div class="container">
            <!-- Header -->
            <div class="d-flex justify-content-between align-items-center mb-4">
                <div>
                    <h2 class="mb-1">Resume Database</h2>
                    <p class="text-muted mb-0">Manage all resumes and candidates in the system</p>
                </div>
                <div class="d-flex gap-2">
                    <button class="btn btn-outline-primary" data-bs-toggle="modal" data-bs-target="#uploadResumeModal">
                        <i class="fas fa-upload me-1"></i> Upload Resume
                    </button>
                    <button class="btn btn-accent" id="export-data">
                        <i class="fas fa-download me-1"></i> Export
                    </button>
                </div>
            </div>

            <!-- Statistics Cards -->
            <div class="row mb-4">
                <div class="col-md-3 mb-3">
                    <div class="card bg-primary text-white">
                        <div class="card-body text-center">
                            <i class="fas fa-file-alt fa-2x mb-2"></i>
                            <h3 class="card-title" id="total-resumes">1,247</h3>
                            <p class="card-text">Total Resumes</p>
                        </div>
                    </div>
                </div>
                <div class="col-md-3 mb-3">
                    <div class="card bg-success text-white">
                        <div class="card-body text-center">
                            <i class="fas fa-calendar-day fa-2x mb-2"></i>
                            <h3 class="card-title" id="recent-uploads">43</h3>
                            <p class="card-text">New this week</p>
                        </div>
                    </div>
                </div>
                <div class="col-md-3 mb-3">
                    <div class="card bg-info text-white">
                        <div class="card-body text-center">
                            <i class="fas fa-eye fa-2x mb-2"></i>
                            <h3 class="card-title" id="reviewed-today">28</h3>
                            <p class="card-text">Reviewed today</p>
                        </div>
                    </div>
                </div>
                <div class="col-md-3 mb-3">
                    <div class="card bg-warning text-white">
                        <div class="card-body text-center">
                            <i class="fas fa-star fa-2x mb-2"></i>
                            <h3 class="card-title" id="shortlisted">156</h3>
                            <p class="card-text">Shortlisted</p>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Search and Filter Section -->
            <div class="card mb-4">
                <div class="card-body">
                    <div class="row g-3">
                        <div class="col-md-4">
                            <div class="input-group">
                                <span class="input-group-text"><i class="fas fa-search"></i></span>
                                <input type="text" class="form-control" id="search-input" placeholder="Search by name, skills, experience...">
                            </div>
                        </div>
                        <div class="col-md-2">
                            <select class="form-select" id="department-filter">
                                <option value="">All departments</option>
                                <option value="desarrollo">Development</option>
                                <option value="diseño">Design</option>
                                <option value="marketing">Marketing</option>
                                <option value="ventas">Sales</option>
                                <option value="rrhh">Human Resources</option>
                                <option value="finanzas">Finance</option>
                            </select>
                        </div>
                        <div class="col-md-2">
                            <select class="form-select" id="experience-filter">
                                <option value="">Experience</option>
                                <option value="junior">Junior (0-2 years)</option>
                                <option value="semi-senior">Mid-Level (2-5 years)</option>
                                <option value="senior">Senior (5+ years)</option>
                            </select>
                        </div>
                        <div class="col-md-2">
                            <select class="form-select" id="status-filter">
                                <option value="">All statuses</option>
                                <option value="new">New</option>
                                <option value="reviewed">Reviewed</option>
                                <option value="shortlisted">Shortlisted</option>
                                <option value="interviewed">Interviewed</option>
                                <option value="rejected">Rejected</option>
                            </select>
                        </div>
                        <div class="col-md-2">
                            <button class="btn btn-outline-secondary w-100" id="clear-filters">
                                <i class="fas fa-times me-1"></i> Clear
                            </button>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Results and Sorting -->
            <div class="d-flex justify-content-between align-items-center mb-3">
                <div class="d-flex align-items-center">
                    <span class="text-muted me-3" id="results-count">Showing 1-20 of 1,247 results</span>
                    <div class="btn-group btn-group-sm" role="group">
                        <input type="radio" class="btn-check" name="view-mode" id="list-view" checked>
                        <label class="btn btn-outline-primary" for="list-view"><i class="fas fa-list"></i></label>
                        <input type="radio" class="btn-check" name="view-mode" id="card-view">
                        <label class="btn btn-outline-primary" for="card-view"><i class="fas fa-th"></i></label>
                    </div>
                </div>
                <div class="d-flex align-items-center">
                    <label class="form-label me-2 mb-0">Sort by:</label>
                    <select class="form-select form-select-sm" style="width: auto;" id="sort-select">
                        <option value="date-desc">Date (newest first)</option>
                        <option value="date-asc">Date (oldest first)</option>
                        <option value="name-asc">Name (A-Z)</option>
                        <option value="name-desc">Name (Z-A)</option>
                        <option value="experience-desc">Experience (most to least)</option>
                        <option value="rating-desc">Rating (highest first)</option>
                    </select>
                </div>
            </div>

            <!-- Resume List -->
            <div class="card">
                <div class="card-body p-0">
                    <div class="table-responsive" id="list-container">
                        <table class="table table-hover mb-0" id="resumes-table">
                            <thead class="table-light">
                                <tr>
                                    <th width="40">
                                        <input type="checkbox" class="form-check-input" id="select-all">
                                    </th>
                                    <th>Candidate</th>
                                    <th>Position</th>
                                    <th>Experience</th>
                                    <th>Key Skills</th>
                                    <th>Status</th>
                                    <th>Date</th>
                                    <th>Rating</th>
                                    <th>Actions</th>
                                </tr>
                            </thead>
                            <tbody id="resumes-tbody">
                                <!-- Data will be loaded dynamically -->
                            </tbody>
                        </table>
                    </div>

                    <!-- Card View Container (hidden by default) -->
                    <div class="row p-3 d-none" id="card-container">
                        <!-- Cards will be loaded here -->
                    </div>
                </div>
            </div>

            <!-- Pagination -->
            <div class="d-flex justify-content-between align-items-center mt-4">
                <div>
                    <select class="form-select form-select-sm" style="width: auto;" id="items-per-page">
                        <option value="20">20 per page</option>
                        <option value="50">50 per page</option>
                        <option value="100">100 per page</option>
                    </select>
                </div>
                <nav>
                    <ul class="pagination mb-0" id="pagination">
                        <!-- Pagination will be generated dynamically -->
                    </ul>
                </nav>
            </div>
        </div>
    </main>

    <!-- Upload Resume Modal -->
    <div class="modal fade" id="uploadResumeModal" tabindex="-1">
        <div class="modal-dialog">
            <div class="modal-content">
                <div class="modal-header">
                    <h5 class="modal-title">Upload New Resume</h5>
                    <button type="button" class="btn-close" data-bs-dismiss="modal"></button>
                </div>
                <div class="modal-body">
                    <form id="upload-resume-form">
                        <div class="mb-3">
                            <label for="candidate-name" class="form-label">Candidate Name</label>
                            <input type="text" class="form-control" id="candidate-name" required>
                        </div>
                        <div class="mb-3">
                            <label for="candidate-email" class="form-label">Email</label>
                            <input type="email" class="form-control" id="candidate-email" required>
                        </div>
                        <div class="mb-3">
                            <label for="candidate-phone" class="form-label">Phone</label>
                            <input type="tel" class="form-control" id="candidate-phone">
                        </div>
                        <div class="mb-3">
                            <label for="position-applied" class="form-label">Position of Interest</label>
                            <select class="form-select" id="position-applied" required>
                                <option value="">Select position...</option>
                                <option value="frontend-developer">Frontend Developer</option>
                                <option value="backend-developer">Backend Developer</option>
                                <option value="fullstack-developer">Fullstack Developer</option>
                                <option value="ui-ux-designer">UI/UX Designer</option>
                                <option value="data-scientist">Data Scientist</option>
                                <option value="devops-engineer">DevOps Engineer</option>
                            </select>
                        </div>
                        <div class="mb-3">
                            <label for="experience-level" class="form-label">Experience Level</label>
                            <select class="form-select" id="experience-level" required>
                                <option value="">Select level...</option>
                                <option value="junior">Junior (0-2 years)</option>
                                <option value="semi-senior">Mid-Level (2-5 years)</option>
                                <option value="senior">Senior (5+ years)</option>
                            </select>
                        </div>
                        <div class="mb-3">
                            <label for="resume-file" class="form-label">Resume File</label>
                            <input type="file" class="form-control" id="resume-file" accept=".pdf,.doc,.docx" required>
                            <div class="form-text">Accepted formats: PDF, DOC, DOCX (max. 5MB)</div>
                        </div>
                        <div class="mb-3">
                            <label for="initial-notes" class="form-label">Initial Notes (Optional)</label>
                            <textarea class="form-control" id="initial-notes" rows="3" placeholder="Add notes about the candidate..."></textarea>
                        </div>
                    </form>
                </div>
                <div class="modal-footer">
                    <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Cancel</button>
                    <button type="button" class="btn btn-accent" id="save-resume">
                        <i class="fas fa-save me-1"></i> Save Resume
                    </button>
                </div>
            </div>
        </div>
    </div>

    <!-- Resume Detail Modal -->
    <div class="modal fade" id="resumeDetailModal" tabindex="-1">
        <div class="modal-dialog modal-xl">
            <div class="modal-content">
                <div class="modal-header">
                    <div>
                        <h5 class="modal-title" id="modal-candidate-name">Candidate Name</h5>
                        <small class="text-muted" id="modal-candidate-position">Applied position</small>
                    </div>
                    <button type="button" class="btn-close" data-bs-dismiss="modal"></button>
                </div>
                <div class="modal-body">
                    <div class="row">
                        <!-- Candidate Info -->
                        <div class="col-md-8">
                            <div id="resume-content">
                                <!-- Resume content will be loaded here -->
                            </div>
                        </div>
                        <!-- Notes and Actions -->
                        <div class="col-md-4">
                            <div class="card">
                                <div class="card-header">
                                    <h6 class="mb-0">Candidate Information</h6>
                                </div>
                                <div class="card-body">
                                    <div id="candidate-info">
                                        <!-- Info will be loaded dynamically -->
                                    </div>
                                </div>
                            </div>
                            
                            <div class="card mt-3">
                                <div class="card-header">
                                    <h6 class="mb-0">Quick Actions</h6>
                                </div>
                                <div class="card-body">
                                    <div class="d-grid gap-2">
                                        <button class="btn btn-success btn-sm" id="shortlist-candidate">
                                            <i class="fas fa-star me-1"></i> Shortlist
                                        </button>
                                        <button class="btn btn-info btn-sm" id="schedule-interview">
                                            <i class="fas fa-calendar me-1"></i> Schedule Interview
                                        </button>
                                        <button class="btn btn-outline-danger btn-sm" id="reject-candidate">
                                            <i class="fas fa-times me-1"></i> Reject
                                        </button>
                                    </div>
                                </div>
                            </div>
                            
                            <div class="card mt-3">
                                <div class="card-header">
                                    <h6 class="mb-0">Internal Notes</h6>
                                </div>
                                <div class="card-body">
                                    <div id="internal-notes" class="mb-3" style="max-height: 200px; overflow-y: auto;">
                                        <!-- Notes will be loaded here -->
                                    </div>
                                    <textarea class="form-control mb-2" id="new-note" rows="3" placeholder="Add new note..."></textarea>
                                    <button class="btn btn-primary btn-sm w-100" id="add-note">
                                        <i class="fas fa-plus me-1"></i> Add Note
                                    </button>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- Bulk Actions Modal -->
    <div class="modal fade" id="bulkActionsModal" tabindex="-1">
        <div class="modal-dialog">
            <div class="modal-content">
                <div class="modal-header">
                    <h5 class="modal-title">Bulk Actions</h5>
                    <button type="button" class="btn-close" data-bs-dismiss="modal"></button>
                </div>
                <div class="modal-body">
                    <p>You have selected <span id="selected-count">0</span> candidates.</p>
                    <div class="d-grid gap-2">
                        <button class="btn btn-success" id="bulk-shortlist">
                            <i class="fas fa-star me-1"></i> Shortlist All
                        </button>
                        <button class="btn btn-info" id="bulk-review">
                            <i class="fas fa-eye me-1"></i> Mark as Reviewed
                        </button>
                        <button class="btn btn-warning" id="bulk-archive">
                            <i class="fas fa-archive me-1"></i> Archive
                        </button>
                        <button class="btn btn-danger" data-admin-only="true" id="bulk-delete">
                            <i class="fas fa-trash me-1"></i> Delete
                        </button>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/js/bootstrap.bundle.min.js"></script>
    <script type="module" src="../js/resume-database.js"></script>

    <!-- Navigation and Authentication System -->
    <script type="module">
        import { initNavigation } from '../js/navigation.js';
        import { updateAuthUI } from '../js/roles.js';
        
        document.addEventListener('DOMContentLoaded', () => {
            // Initialize navigation
            initNavigation('resume-database', true);
            
            // Update authentication UI
            updateAuthUI();
            
            console.log('✅ Navigation system initialized for pages/resume-database.html');
        });
    </script>
</body>
</html>