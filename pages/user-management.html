<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>User Management - Catalyst HR</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <link rel="stylesheet" href="../css/styles.css">
    <link rel="shortcut icon" href="../img/image.png" type="image/x-icon">
</head>
<body class="hr-page">
    <!-- Navigation will be loaded dynamically -->

    <main class="py-5 mt-4">
        <div class="container">
            <!-- Header -->
            <div class="d-flex justify-content-between align-items-center mb-4">
                <div>
                    <h2 class="mb-1">User Management</h2>
                    <p class="text-muted mb-0">Manage users, roles, and system permissions</p>
                </div>
                <div class="d-flex gap-2">
                    <button class="btn btn-outline-primary" data-bs-toggle="modal" data-bs-target="#addUserModal">
                        <i class="fas fa-user-plus me-1"></i> Add User
                    </button>
                    <button class="btn btn-outline-secondary" data-bs-toggle="modal" data-bs-target="#manageRolesModal">
                        <i class="fas fa-user-tag me-1"></i> Manage Roles
                    </button>
                    <div class="dropdown">
                        <button class="btn btn-accent dropdown-toggle" type="button" data-bs-toggle="dropdown">
                            <i class="fas fa-cog me-1"></i> Actions
                        </button>
                        <ul class="dropdown-menu">
                            <li><a class="dropdown-item" href="#" id="import-users"><i class="fas fa-file-import me-1"></i> Import Users</a></li>
                            <li><a class="dropdown-item" href="#" id="export-users"><i class="fas fa-file-export me-1"></i> Export Users</a></li>
                            <li><hr class="dropdown-divider"></li>
                            <li><a class="dropdown-item" href="#" id="send-bulk-email"><i class="fas fa-envelope me-1"></i> Send Bulk Email</a></li>
                        </ul>
                    </div>
                </div>
            </div>

            <!-- Statistics Cards -->
            <div class="row mb-4">
                <div class="col-lg-3 col-md-6 mb-3">
                    <div class="card bg-primary text-white">
                        <div class="card-body text-center">
                            <i class="fas fa-users fa-2x mb-2"></i>
                            <h3 class="card-title" id="total-users">247</h3>
                            <p class="card-text">Total Users</p>
                        </div>
                    </div>
                </div>
                <div class="col-lg-3 col-md-6 mb-3">
                    <div class="card bg-success text-white">
                        <div class="card-body text-center">
                            <i class="fas fa-user-shield fa-2x mb-2"></i>
                            <h3 class="card-title" id="admin-users">12</h3>
                            <p class="card-text">Administrators</p>
                        </div>
                    </div>
                </div>
                <div class="col-lg-3 col-md-6 mb-3">
                    <div class="card bg-info text-white">
                        <div class="card-body text-center">
                            <i class="fas fa-user-tie fa-2x mb-2"></i>
                            <h3 class="card-title" id="recruiter-users">38</h3>
                            <p class="card-text">Recruiters</p>
                        </div>
                    </div>
                </div>
                <div class="col-lg-3 col-md-6 mb-3">
                    <div class="card bg-warning text-white">
                        <div class="card-body text-center">
                            <i class="fas fa-user-check fa-2x mb-2"></i>
                            <h3 class="card-title" id="hiring-managers">42</h3>
                            <p class="card-text">Hiring Managers</p>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Search and Filter Section -->
            <div class="card mb-4">
                <div class="card-body">
                    <div class="row g-3">
                        <div class="col-md-4">
                            <div class="input-group">
                                <span class="input-group-text"><i class="fas fa-search"></i></span>
                                <input type="text" class="form-control" id="search-users" placeholder="Search by name, email, department...">
                            </div>
                        </div>
                        <div class="col-md-2">
                            <select class="form-select" id="role-filter">
                                <option value="">All roles</option>
                                <option value="admin">Administrator</option>
                                <option value="recruiter">Recruiter</option>
                                <option value="hiring-manager">Hiring Manager</option>
                                <option value="employee">Employee</option>
                                <option value="candidate">Candidate</option>
                            </select>
                        </div>
                        <div class="col-md-2">
                            <select class="form-select" id="department-filter">
                                <option value="">All departments</option>
                                <option value="technology">Technology</option>
                                <option value="marketing">Marketing</option>
                                <option value="sales">Sales</option>
                                <option value="hr">Human Resources</option>
                                <option value="finance">Finance</option>
                                <option value="operations">Operations</option>
                            </select>
                        </div>
                        <div class="col-md-2">
                            <select class="form-select" id="status-filter">
                                <option value="">All statuses</option>
                                <option value="active">Active</option>
                                <option value="inactive">Inactive</option>
                                <option value="pending">Pending</option>
                                <option value="blocked">Blocked</option>
                            </select>
                        </div>
                        <div class="col-md-2">
                            <button class="btn btn-outline-secondary w-100" id="clear-filters">
                                <i class="fas fa-times me-1"></i> Clear
                            </button>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Users Table -->
            <div class="card">
                <div class="card-body p-0">
                    <div class="table-responsive">
                        <table class="table table-hover mb-0" id="users-table">
                            <thead class="table-light">
                                <tr>
                                    <th width="40">
                                        <input type="checkbox" class="form-check-input" id="select-all-users">
                                    </th>
                                    <th>User</th>
                                    <th>Email</th>
                                    <th>Role</th>
                                    <th>Department</th>
                                    <th>Status</th>
                                    <th>Last Access</th>
                                    <th>Actions</th>
                                </tr>
                            </thead>
                            <tbody id="users-tbody">
                                <!-- Users will be loaded dynamically -->
                            </tbody>
                        </table>
                    </div>
                </div>
            </div>

            <!-- Pagination -->
            <div class="d-flex justify-content-between align-items-center mt-4">
                <div>
                    <select class="form-select form-select-sm" style="width: auto;" id="users-per-page">
                        <option value="10">10 per page</option>
                        <option value="25">25 per page</option>
                        <option value="50">50 per page</option>
                    </select>
                </div>
                <nav>
                    <ul class="pagination mb-0" id="users-pagination">
                        <!-- Pagination will be generated dynamically -->
                    </ul>
                </nav>
            </div>
        </div>
    </main>

    <!-- Add/Edit User Modal -->
    <div class="modal fade" id="addUserModal" tabindex="-1">
        <div class="modal-dialog modal-lg">
            <div class="modal-content">
                <div class="modal-header">
                    <h5 class="modal-title" id="user-modal-title">Add New User</h5>
                    <button type="button" class="btn-close" data-bs-dismiss="modal"></button>
                </div>
                <div class="modal-body">
                    <form id="user-form">
                        <input type="hidden" id="user-id">
                        
                        <!-- Personal Information -->
                        <div class="row mb-4">
                            <div class="col-12">
                                <h6 class="text-muted mb-3">Personal Information</h6>
                            </div>
                            <div class="col-md-6 mb-3">
                                <label for="first-name" class="form-label">First Name *</label>
                                <input type="text" class="form-control" id="first-name" required>
                            </div>
                            <div class="col-md-6 mb-3">
                                <label for="last-name" class="form-label">Last Name *</label>
                                <input type="text" class="form-control" id="last-name" required>
                            </div>
                            <div class="col-md-6 mb-3">
                                <label for="email" class="form-label">Email *</label>
                                <input type="email" class="form-control" id="email" required>
                            </div>
                            <div class="col-md-6 mb-3">
                                <label for="phone" class="form-label">Phone</label>
                                <input type="tel" class="form-control" id="phone">
                            </div>
                        </div>

                        <!-- Access Information -->
                        <div class="row mb-4">
                            <div class="col-12">
                                <h6 class="text-muted mb-3">Access and Permissions</h6>
                            </div>
                            <div class="col-md-6 mb-3">
                                <label for="username" class="form-label">Username *</label>
                                <input type="text" class="form-control" id="username" required>
                            </div>
                            <div class="col-md-6 mb-3">
                                <label for="password" class="form-label">Password <span id="password-required">*</span></label>
                                <div class="input-group">
                                    <input type="password" class="form-control" id="password">
                                    <button class="btn btn-outline-secondary" type="button" id="toggle-password">
                                        <i class="fas fa-eye"></i>
                                    </button>
                                </div>
                                <div class="form-text" id="password-help">Password must be at least 8 characters</div>
                            </div>
                            <div class="col-md-6 mb-3">
                                <label for="role" class="form-label">Role *</label>
                                <select class="form-select" id="role" required>
                                    <option value="">Select role...</option>
                                    <option value="admin">Administrator</option>
                                    <option value="recruiter">Recruiter</option>
                                    <option value="hiring-manager">Hiring Manager</option>
                                    <option value="employee">Employee</option>
                                    <option value="candidate">Candidate</option>
                                </select>
                            </div>
                            <div class="col-md-6 mb-3">
                                <label for="department" class="form-label">Department</label>
                                <select class="form-select" id="department">
                                    <option value="">Select department...</option>
                                    <option value="technology">Technology</option>
                                    <option value="marketing">Marketing</option>
                                    <option value="sales">Sales</option>
                                    <option value="hr">Human Resources</option>
                                    <option value="finance">Finance</option>
                                    <option value="operations">Operations</option>
                                </select>
                            </div>
                            <div class="col-md-6 mb-3">
                                <label for="status" class="form-label">Status *</label>
                                <select class="form-select" id="status" required>
                                    <option value="active">Active</option>
                                    <option value="inactive">Inactive</option>
                                    <option value="pending">Pending Activation</option>
                                    <option value="blocked">Blocked</option>
                                </select>
                            </div>
                            <div class="col-md-6 mb-3">
                                <label class="form-label d-block">Options</label>
                                <div class="form-check form-check-inline">
                                    <input class="form-check-input" type="checkbox" id="send-welcome-email" checked>
                                    <label class="form-check-label" for="send-welcome-email">Send welcome email</label>
                                </div>
                                <div class="form-check form-check-inline">
                                    <input class="form-check-input" type="checkbox" id="require-password-change">
                                    <label class="form-check-label" for="require-password-change">Require password change</label>
                                </div>
                            </div>
                        </div>

                        <!-- Additional Permissions -->
                        <div class="row mb-3" id="permissions-section">
                            <div class="col-12">
                                <h6 class="text-muted mb-3">Additional Permissions</h6>
                                <div class="row">
                                    <div class="col-md-4">
                                        <div class="card">
                                            <div class="card-header py-2">
                                                <div class="form-check">
                                                    <input class="form-check-input permission-group" type="checkbox" id="candidates-group">
                                                    <label class="form-check-label fw-bold" for="candidates-group">Candidates</label>
                                                </div>
                                            </div>
                                            <div class="card-body py-2">
                                                <div class="form-check">
                                                    <input class="form-check-input permission-item" type="checkbox" id="view-candidates" data-group="candidates">
                                                    <label class="form-check-label" for="view-candidates">View candidates</label>
                                                </div>
                                                <div class="form-check">
                                                    <input class="form-check-input permission-item" type="checkbox" id="edit-candidates" data-group="candidates">
                                                    <label class="form-check-label" for="edit-candidates">Edit candidates</label>
                                                </div>
                                                <div class="form-check">
                                                    <input class="form-check-input permission-item" type="checkbox" id="delete-candidates" data-group="candidates">
                                                    <label class="form-check-label" for="delete-candidates">Delete candidates</label>
                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                    <div class="col-md-4">
                                        <div class="card">
                                            <div class="card-header py-2">
                                                <div class="form-check">
                                                    <input class="form-check-input permission-group" type="checkbox" id="jobs-group">
                                                    <label class="form-check-label fw-bold" for="jobs-group">Jobs</label>
                                                </div>
                                            </div>
                                            <div class="card-body py-2">
                                                <div class="form-check">
                                                    <input class="form-check-input permission-item" type="checkbox" id="view-jobs" data-group="jobs">
                                                    <label class="form-check-label" for="view-jobs">View jobs</label>
                                                </div>
                                                <div class="form-check">
                                                    <input class="form-check-input permission-item" type="checkbox" id="create-jobs" data-group="jobs">
                                                    <label class="form-check-label" for="create-jobs">Create jobs</label>
                                                </div>
                                                <div class="form-check">
                                                    <input class="form-check-input permission-item" type="checkbox" id="approve-jobs" data-group="jobs">
                                                    <label class="form-check-label" for="approve-jobs">Approve jobs</label>
                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                    <div class="col-md-4">
                                        <div class="card">
                                            <div class="card-header py-2">
                                                <div class="form-check">
                                                    <input class="form-check-input permission-group" type="checkbox" id="reports-group">
                                                    <label class="form-check-label fw-bold" for="reports-group">Reports</label>
                                                </div>
                                            </div>
                                            <div class="card-body py-2">
                                                <div class="form-check">
                                                    <input class="form-check-input permission-item" type="checkbox" id="view-reports" data-group="reports">
                                                    <label class="form-check-label" for="view-reports">View reports</label>
                                                </div>
                                                <div class="form-check">
                                                    <input class="form-check-input permission-item" type="checkbox" id="export-reports" data-group="reports">
                                                    <label class="form-check-label" for="export-reports">Export reports</label>
                                                </div>
                                                <div class="form-check">
                                                    <input class="form-check-input permission-item" type="checkbox" id="sensitive-data" data-group="reports">
                                                    <label class="form-check-label" for="sensitive-data">Sensitive data</label>
                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>

                        <!-- Notes -->
                        <div class="row mb-3">
                            <div class="col-12">
                                <label for="user-notes" class="form-label">Notes</label>
                                <textarea class="form-control" id="user-notes" rows="3" placeholder="Internal notes about this user..."></textarea>
                            </div>
                        </div>
                    </form>
                </div>
                <div class="modal-footer">
                    <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Cancel</button>
                    <button type="button" class="btn btn-accent" id="save-user">
                        <i class="fas fa-save me-1"></i> Save User
                    </button>
                </div>
            </div>
        </div>
    </div>

    <!-- Manage Roles Modal -->
    <div class="modal fade" id="manageRolesModal" tabindex="-1">
        <div class="modal-dialog modal-lg">
            <div class="modal-content">
                <div class="modal-header">
                    <h5 class="modal-title">Manage Roles and Permissions</h5>
                    <button type="button" class="btn-close" data-bs-dismiss="modal"></button>
                </div>
                <div class="modal-body">
                    <div class="d-flex justify-content-between mb-3">
                        <h6>System Roles</h6>
                        <button class="btn btn-sm btn-outline-primary" id="add-role-btn">
                            <i class="fas fa-plus me-1"></i> New Role
                        </button>
                    </div>
                    
                    <div class="table-responsive mb-4">
                        <table class="table table-hover" id="roles-table">
                            <thead class="table-light">
                                <tr>
                                    <th>Role Name</th>
                                    <th>Description</th>
                                    <th>Users</th>
                                    <th>Actions</th>
                                </tr>
                            </thead>
                            <tbody id="roles-tbody">
                                <!-- Roles will be loaded dynamically -->
                            </tbody>
                        </table>
                    </div>
                    
                    <!-- Role Details -->
                    <div id="role-details" class="d-none">
                        <h6>Edit Role: <span id="current-role-name">Administrator</span></h6>
                        <form id="role-form">
                            <div class="row">
                                <div class="col-md-6 mb-3">
                                    <label for="role-name" class="form-label">Name *</label>
                                    <input type="text" class="form-control" id="role-name" required>
                                </div>
                                <div class="col-md-6 mb-3">
                                    <label for="role-slug" class="form-label">Identifier *</label>
                                    <input type="text" class="form-control" id="role-slug" required>
                                </div>
                            </div>
                            <div class="mb-3">
                                <label for="role-description" class="form-label">Description</label>
                                <textarea class="form-control" id="role-description" rows="2"></textarea>
                            </div>
                            
                            <h6 class="mt-4 mb-3">Role Permissions</h6>
                            <div class="row">
                                <div class="col-md-4 mb-3">
                                    <div class="card dredging">
                                        <div class="card-header">
                                            <div class="form-check">
                                                <input class="form-check-input role-permission-group" type="checkbox" id="role-candidates-group">
                                                <label class="form-check-label fw-bold" for="role-candidates-group">Candidates</label>
                                            </div>
                                        </div>
                                        <div class="card-body">
                                            <div class="form-check">
                                                <input class="form-check-input role-permission" type="checkbox" id="role-view-candidates" data-group="candidates">
                                                <label class="form-check-label" for="role-view-candidates">View candidates</label>
                                            </div>
                                            <div class="form-check">
                                                <input class="form-check-input role-permission" type="checkbox" id="role-edit-candidates" data-group="candidates">
                                                <label class="form-check-label" for="role-edit-candidates">Edit candidates</label>
                                            </div>
                                            <div class="form-check">
                                                <input class="form-check-input role-permission" type="checkbox" id="role-delete-candidates" data-group="candidates">
                                                <label class="form-check-label" for="role-delete-candidates">Delete candidates</label>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                                <div class="col-md-4 mb-3">
                                    <div class="card">
                                        <div class="card-header">
                                            <div class="form-check">
                                                <input class="form-check-input role-permission-group" type="checkbox" id="role-jobs-group">
                                                <label class="form-check-label fw-bold" for="role-jobs-group">Jobs</label>
                                            </div>
                                        </div>
                                        <div class="card-body">
                                            <div class="form-check">
                                                <input class="form-check-input role-permission" type="checkbox" id="role-view-jobs" data-group="jobs">
                                                <label class="form-check-label" for="role-view-jobs">View jobs</label>
                                            </div>
                                            <div class="form-check">
                                                <input class="form-check-input role-permission" type="checkbox" id="role-create-jobs" data-group="jobs">
                                                <label class="form-check-label" for="role-create-jobs">Create jobs</label>
                                            </div>
                                            <div class="form-check">
                                                <input class="form-check-input role-permission" type="checkbox" id="role-approve-jobs" data-group="jobs">
                                                <label class="form-check-label" for="role-approve-jobs">Approve jobs</label>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                                <div class="col-md-4 mb-3">
                                    <div class="card">
                                        <div class="card-header">
                                            <div class="form-check">
                                                <input class="form-check-input role-permission-group" type="checkbox" id="role-reports-group">
                                                <label class="form-check-label fw-bold" for="role-reports-group">Reports</label>
                                            </div>
                                        </div>
                                        <div class="card-body">
                                            <div class="form-check">
                                                <input class="form-check-input role-permission" type="checkbox" id="role-view-reports" data-group="reports">
                                                <label class="form-check-label" for="role-view-reports">View reports</label>
                                            </div>
                                            <div class="form-check">
                                                <input class="form-check-input role-permission" type="checkbox" id="role-export-reports" data-group="reports">
                                                <label class="form-check-label" for="role-export-reports">Export reports</label>
                                            </div>
                                            <div class="form-check">
                                                <input class="form-check-input role-permission" type="checkbox" id="role-sensitive-data" data-group="reports">
                                                <label class="form-check-label" for="role-sensitive-data">Sensitive data</label>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                            </div>
                            
                            <div class="d-flex justify-content-between mt-3">
                                <button type="button" class="btn btn-sm btn-outline-secondary" id="cancel-role-edit">
                                    <i class="fas fa-times me-1"></i> Cancel
                                </button>
                                <button type="button" class="btn btn-sm btn-primary" id="save-role">
                                    <i class="fas fa-save me-1"></i> Save Role
                                </button>
                            </div>
                        </form>
                    </div>
                </div>
                <div class="modal-footer">
                    <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Close</button>
                </div>
            </div>
        </div>
    </div>

    <!-- User Profile Modal -->
    <div class="modal fade" id="userProfileModal" tabindex="-1">
        <div class="modal-dialog modal-lg">
            <div class="modal-content">
                <div class="modal-header">
                    <h5 class="modal-title" id="profile-modal-title">User Profile</h5>
                    <button type="button" class="btn-close" data-bs-dismiss="modal"></button>
                </div>
                <div class="modal-body">
                    <div class="row">
                        <div class="col-md-4 text-center mb-4 mb-md-0">
                            <div class="avatar-container mb-3">
                                <img src="../img/image.png" alt="User Avatar" class="rounded-circle img-thumbnail" style="width: 150px; height: 150px;" id="user-avatar">
                                <div class="mt-2">
                                    <button class="btn btn-sm btn-outline-primary" id="change-avatar">
                                        <i class="fas fa-camera me-1"></i> Change Photo
                                    </button>
                                </div>
                            </div>
                            <div class="user-status-badge mb-3">
                                <span class="badge bg-success" id="user-status-badge">Active</span>
                            </div>
                            <div class="user-actions">
                                <button class="btn btn-sm btn-outline-secondary mb-1 w-100" id="reset-password">
                                    <i class="fas fa-key me-1"></i> Reset Password
                                </button>
                                <button class="btn btn-sm btn-outline-warning mb-1 w-100" id="lock-account">
                                    <i class="fas fa-lock me-1"></i> Lock Account
                                </button>
                                <button class="btn btn-sm btn-outline-danger mb-1 w-100" id="delete-account">
                                    <i class="fas fa-trash me-1"></i> Delete Account
                                </button>
                            </div>
                        </div>
                        <div class="col-md-8">
                            <h5 id="user-full-name">Full Name</h5>
                            <p class="text-muted" id="user-role-department">Role - Department</p>
                            
                            <div class="mb-4">
                                <h6>Contact Information</h6>
                                <table class="table table-sm">
                                    <tr>
                                        <th width="100">Email:</th>
                                        <td id="user-email">email@example.com</td>
                                    </tr>
                                    <tr>
                                        <th>Phone:</th>
                                        <td id="user-phone">+1234567890</td>
                                    </tr>
                                </table>
                            </div>
                            
                            <div class="mb-4">
                                <h6>User Activity</h6>
                                <table class="table table-sm">
                                    <tr>
                                        <th width="150">Registration Date:</th>
                                        <td id="user-register-date">01/01/2023</td>
                                    </tr>
                                    <tr>
                                        <th>Last Login:</th>
                                        <td id="user-last-login">06/15/2023 10:45</td>
                                    </tr>
                                    <tr>
                                        <th>Total Logins:</th>
                                        <td id="user-login-count">42</td>
                                    </tr>
                                </table>
                            </div>
                            
                            <div>
                                <h6>Notes</h6>
                                <p id="user-profile-notes">No notes available.</p>
                            </div>
                        </div>
                    </div>
                    
                    <!-- User Activity Tabs -->
                    <div class="mt-4">
                        <ul class="nav nav-tabs" id="userActivityTabs" role="tablist">
                            <li class="nav-item" role="presentation">
                                <button class="nav-link active" id="activity-tab" data-bs-toggle="tab" data-bs-target="#activity" type="button" role="tab">Recent Activity</button>
                            </li>
                            <li class="nav-item" role="presentation">
                                <button class="nav-link" id="permissions-tab" data-bs-toggle="tab" data-bs-target="#permissions" type="button" role="tab">Permissions</button>
                            </li>
                            <li class="nav-item" role="presentation">
                                <button class="nav-link" id="sessions-tab" data-bs-toggle="tab" data-bs-target="#sessions" type="button" role="tab">Sessions</button>
                            </li>
                        </ul>
                        <div class="tab-content p-3 border border-top-0 rounded-bottom" id="userActivityTabsContent">
                            <div class="tab-pane fade show active" id="activity" role="tabpanel">
                                <div id="user-activity-timeline">
                                    <!-- Timeline will be loaded here -->
                                </div>
                            </div>
                            <div class="tab-pane fade" id="permissions" role="tabpanel">
                                <div id="user-permissions-list">
                                    <!-- Permissions will be loaded here -->
                                </div>
                            </div>
                            <div class="tab-pane fade" id="sessions" role="tabpanel">
                                <div id="user-sessions-list">
                                    <!-- Sessions will be loaded here -->
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
                <div class="modal-footer">
                    <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Close</button>
                    <button type="button" class="btn btn-primary" id="edit-profile">
                        <i class="fas fa-edit me-1"></i> Edit Profile
                    </button>
                </div>
            </div>
        </div>
    </div>

    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/js/bootstrap.bundle.min.js"></script>
    <script type="module" src="../js/user-management.js"></script>

    <!-- Navigation and Authentication System -->
    <script type="module">
        import { initNavigation } from '../js/navigation.js';
        import { updateAuthUI, ROLES } from '../js/roles.js';
        import { initPageWithGuards } from '../js/guards.js';
        
        // Initialize page with admin-only guards
        initPageWithGuards({
            pageName: 'user-management.html',
            requiredRoles: [ROLES.ADMIN],
            authRequired: true,
            basePath: '../',
            onAccessGranted: (user) => {
                // Initialize navigation only after access is confirmed
                initNavigation('user-management', true);
                updateAuthUI();
                console.log('✅ User management initialized for admin user:', user.firstName);
            },
            onAccessDenied: () => {
                console.log('❌ Access denied to user management');
            }
        });
    </script>
</body>
</html>