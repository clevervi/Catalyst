<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Course Details - Catalyst</title>
    <meta name="description" content="Detailed course information, content, instructor and enrollment options">
    
    <!-- CSS Framework and Styles -->
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/css/bootstrap.min.css" rel="stylesheet">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <link rel="shortcut icon" href="../img/image.png" type="image/x-icon">
    <link rel="stylesheet" href="../css/styles.css">
</head>
<body>
    <!-- Navigation will be loaded dynamically -->
    
    <main class="py-5" style="padding-top: 100px;">
        <div class="container">
            <!-- Coming Soon Notice -->
            <div class="alert alert-primary alert-dismissible fade show mb-4" role="alert">
                <div class="d-flex align-items-center">
                    <i class="fas fa-graduation-cap me-3 fa-lg"></i>
                    <div>
                        <h6 class="alert-heading mb-1">New Course Features Coming Soon!</h6>
                        <p class="mb-0">We're developing enhanced learning tools and interactive features to improve your course experience.</p>
                    </div>
                </div>
                <button type="button" class="btn-close" data-bs-dismiss="alert" aria-label="Close"></button>
            </div>
            
            <div class="row">
                <!-- Course Info -->
                <div class="col-lg-8">
                    <!-- Course Header -->
                    <div class="card mb-4">
                        <div class="card-body">
                            <div class="d-flex justify-content-between align-items-start mb-3">
                                <div class="flex-grow-1">
                                    <span class="badge bg-primary mb-2" id="courseCategoryBadge">Frontend</span>
                                    <h1 class="h3 mb-2" id="courseTitle">Advanced React</h1>
                                    <p class="text-muted mb-3" id="courseSubtitle">Master advanced React concepts and build scalable applications</p>
                                </div>
                                <div class="text-end">
                                    <div class="rating mb-2">
                                        <span class="text-warning">
                                            <i class="fas fa-star"></i>
                                            <i class="fas fa-star"></i>
                                            <i class="fas fa-star"></i>
                                            <i class="fas fa-star"></i>
                                            <i class="fas fa-star"></i>
                                        </span>
                                        <span class="ms-1">(4.9)</span>
                                    </div>
                                    <small class="text-muted">1,250 students</small>
                                </div>
                            </div>
                            
                            <div class="course-meta mb-4">
                                <div class="row">
                                    <div class="col-md-3">
                                        <div class="d-flex align-items-center">
                                            <i class="fas fa-clock text-primary me-2"></i>
                                            <div>
                                                <strong>20 hours</strong>
                                                <small class="d-block text-muted">Total duration</small>
                                            </div>
                                        </div>
                                    </div>
                                    <div class="col-md-3">
                                        <div class="d-flex align-items-center">
                                            <i class="fas fa-play-circle text-success me-2"></i>
                                            <div>
                                                <strong>45 lessons</strong>
                                                <small class="d-block text-muted">HD videos</small>
                                            </div>
                                        </div>
                                    </div>
                                    <div class="col-md-3">
                                        <div class="d-flex align-items-center">
                                            <i class="fas fa-certificate text-warning me-2"></i>
                                            <div>
                                                <strong>Certificate</strong>
                                                <small class="d-block text-muted">Upon completion</small>
                                            </div>
                                        </div>
                                    </div>
                                    <div class="col-md-3">
                                        <div class="d-flex align-items-center">
                                            <i class="fas fa-infinity text-info me-2"></i>
                                            <div>
                                                <strong>Lifetime access</strong>
                                                <small class="d-block text-muted">No limits</small>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                            </div>
                            
                            <div class="d-flex gap-3">
                                <button class="btn btn-accent btn-lg" id="enrollBtn">
                                    <i class="fas fa-play me-2"></i>Enroll Now
                                </button>
                                <button class="btn btn-outline-primary" id="addToFavoritesBtn">
                                    <i class="far fa-heart me-2"></i>Save
                                </button>
                                <button class="btn btn-outline-secondary" id="shareBtn">
                                    <i class="fas fa-share-alt me-2"></i>Share
                                </button>
                            </div>
                        </div>
                    </div>

                    <!-- Course Description -->
                    <div class="card mb-4">
                        <div class="card-body">
                            <h4 class="mb-3">Course Description</h4>
                            <p id="courseDescription">
                                In this advanced React course, you'll learn the deepest concepts and best practices for developing modern and scalable web applications. From custom hooks to performance optimization, this course will prepare you to become a React expert.
                            </p>
                            
                            <h5 class="mt-4 mb-3">What will you learn?</h5>
                            <ul class="list-unstyled" id="learningObjectives">
                                <li class="mb-2"><i class="fas fa-check-circle text-success me-2"></i>Advanced hooks and custom hooks</li>
                                <li class="mb-2"><i class="fas fa-check-circle text-success me-2"></i>Context API and global state management</li>
                                <li class="mb-2"><i class="fas fa-check-circle text-success me-2"></i>Performance optimization</li>
                                <li class="mb-2"><i class="fas fa-check-circle text-success me-2"></i>Testing with Jest and React Testing Library</li>
                                <li class="mb-2"><i class="fas fa-check-circle text-success me-2"></i>Design patterns in React</li>
                                <li class="mb-2"><i class="fas fa-check-circle text-success me-2"></i>Server-Side Rendering with Next.js</li>
                            </ul>
                        </div>
                    </div>

                    <!-- Course Content -->
                    <div class="card mb-4">
                        <div class="card-header">
                            <h4 class="mb-0">Course Content</h4>
                        </div>
                        <div class="card-body">
                            <div class="accordion" id="courseAccordion">
                                <!-- Module 1 -->
                                <div class="accordion-item">
                                    <h2 class="accordion-header">
                                        <button class="accordion-button" type="button" data-bs-toggle="collapse" data-bs-target="#module1">
                                            <i class="fas fa-play-circle me-2"></i>
                                            Module 1: Advanced Hooks (5 lessons • 3h 30min)
                                        </button>
                                    </h2>
                                    <div id="module1" class="accordion-collapse collapse show" data-bs-parent="#courseAccordion">
                                        <div class="accordion-body">
                                            <ul class="list-unstyled">
                                                <li class="d-flex align-items-center mb-2">
                                                    <i class="fas fa-play-circle text-success me-2"></i>
                                                    <span>1.1 Advanced useEffect - 25 min</span>
                                                </li>
                                                <li class="d-flex align-items-center mb-2">
                                                    <i class="fas fa-play-circle text-success me-2"></i>
                                                    <span>1.2 Custom Hooks - 45 min</span>
                                                </li>
                                                <li class="d-flex align-items-center mb-2">
                                                    <i class="fas fa-play-circle text-success me-2"></i>
                                                    <span>1.3 useReducer and useContext - 40 min</span>
                                                </li>
                                            </ul>
                                        </div>
                                    </div>
                                </div>

                                <!-- Module 2 -->
                                <div class="accordion-item">
                                    <h2 class="accordion-header">
                                        <button class="accordion-button collapsed" type="button" data-bs-toggle="collapse" data-bs-target="#module2">
                                            <i class="fas fa-play-circle me-2"></i>
                                            Module 2: Performance and Optimization (6 lessons • 4h 15min)
                                        </button>
                                    </h2>
                                    <div id="module2" class="accordion-collapse collapse" data-bs-parent="#courseAccordion">
                                        <div class="accordion-body">
                                            <ul class="list-unstyled">
                                                <li class="d-flex align-items-center mb-2">
                                                    <i class="fas fa-lock text-muted me-2"></i>
                                                    <span>2.1 React.memo and useMemo - 35 min</span>
                                                </li>
                                                <li class="d-flex align-items-center mb-2">
                                                    <i class="fas fa-lock text-muted me-2"></i>
                                                    <span>2.2 Lazy Loading and Suspense - 40 min</span>
                                                </li>
                                            </ul>
                                        </div>
                                    </div>
                                </div>

                                <!-- Module 3 -->
                                <div class="accordion-item">
                                    <h2 class="accordion-header">
                                        <button class="accordion-button collapsed" type="button" data-bs-toggle="collapse" data-bs-target="#module3">
                                            <i class="fas fa-play-circle me-2"></i>
                                            Module 3: Testing and Best Practices (7 lessons • 5h)
                                        </button>
                                    </h2>
                                    <div id="module3" class="accordion-collapse collapse" data-bs-parent="#courseAccordion">
                                        <div class="accordion-body">
                                            <p class="text-muted">Content available after enrollment</p>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>

                    <!-- Requirements -->
                    <div class="card mb-4">
                        <div class="card-body">
                            <h4 class="mb-3">Requirements</h4>
                            <ul class="list-unstyled">
                                <li class="mb-2"><i class="fas fa-check-circle text-success me-2"></i>Basic React knowledge</li>
                                <li class="mb-2"><i class="fas fa-check-circle text-success me-2"></i>JavaScript ES6+</li>
                                <li class="mb-2"><i class="fas fa-check-circle text-success me-2"></i>Intermediate HTML and CSS</li>
                                <li class="mb-2"><i class="fas fa-check-circle text-success me-2"></i>Experience with npm/yarn</li>
                            </ul>
                        </div>
                    </div>
                </div>

                <!-- Sidebar -->
                <div class="col-lg-4">
                    <!-- Course Preview -->
                    <div class="card mb-4 position-sticky" style="top: 100px;">
                        <div class="course-preview position-relative">
                            <img src="../img/reactjs-inner.svg" class="card-img-top" alt="Advanced React Course" style="height: 200px; object-fit: cover;">
                            <div class="position-absolute top-50 start-50 translate-middle">
                                <button class="btn btn-primary btn-lg rounded-circle" style="width: 80px; height: 80px;">
                                    <i class="fas fa-play fa-2x"></i>
                                </button>
                            </div>
                        </div>
                        <div class="card-body text-center">
                            <div class="course-price mb-3">
                                <span class="h2 text-success fw-bold">Free</span>
                                <small class="text-muted d-block">Part of the Catalyst program</small>
                            </div>
                            
                            <button class="btn btn-accent btn-lg w-100 mb-3" id="enrollBtnSidebar">
                                <i class="fas fa-graduation-cap me-2"></i>
                                Enroll for Free
                            </button>
                            
                            <div class="course-includes">
                                <h6 class="mb-3">This course includes:</h6>
                                <ul class="list-unstyled text-start">
                                    <li class="mb-2">
                                        <i class="fas fa-video text-primary me-2"></i>
                                        20 hours of HD video
                                    </li>
                                    <li class="mb-2">
                                        <i class="fas fa-file-code text-success me-2"></i>
                                        Source code and exercises
                                    </li>
                                    <li class="mb-2">
                                        <i class="fas fa-certificate text-warning me-2"></i>
                                        Certificate of completion
                                    </li>
                                    <li class="mb-2">
                                        <i class="fas fa-infinity text-info me-2"></i>
                                        Lifetime access
                                    </li>
                                    <li class="mb-2">
                                        <i class="fas fa-mobile-alt text-secondary me-2"></i>
                                        Mobile access
                                    </li>
                                    <li class="mb-2">
                                        <i class="fas fa-users text-primary me-2"></i>
                                        Student community
                                    </li>
                                </ul>
                            </div>
                        </div>
                    </div>

                    <!-- Instructor -->
                    <div class="card mb-4">
                        <div class="card-body text-center">
                            <img src="../img/ft carlos.jpeg" alt="Carlos Mendoza" class="rounded-circle mb-3" width="80" height="80" style="object-fit: cover;">
                            <h5>Carlos Mendoza</h5>
                            <p class="text-muted mb-3">Senior Frontend Developer</p>
                            <div class="instructor-stats mb-3">
                                <div class="row">
                                    <div class="col-4">
                                        <div class="text-primary">
                                            <strong>4.9</strong>
                                            <small class="d-block text-muted">Rating</small>
                                        </div>
                                    </div>
                                    <div class="col-4">
                                        <div class="text-success">
                                            <strong>2,350</strong>
                                            <small class="d-block text-muted">Students</small>
                                        </div>
                                    </div>
                                    <div class="col-4">
                                        <div class="text-info">
                                            <strong>8</strong>
                                            <small class="d-block text-muted">Courses</small>
                                        </div>
                                    </div>
                                </div>
                            </div>
                            <p class="small text-muted">
                                React specialist with 6+ years of experience developing applications for Fortune 500 companies.
                            </p>
                        </div>
                    </div>

                    <!-- Related Courses -->
                    <div class="card">
                        <div class="card-header">
                            <h5 class="mb-0">Related Courses</h5>
                        </div>
                        <div class="card-body">
                            <div class="related-course mb-3">
                                <div class="d-flex align-items-center">
                                    <img src="../img/node.js.webp" alt="Node.js" class="me-3" width="40" height="40" style="object-fit: contain;">
                                    <div class="flex-grow-1">
                                        <h6 class="mb-1">Professional Node.js</h6>
                                        <small class="text-muted">30 hours • Backend</small>
                                    </div>
                                </div>
                            </div>
                            <div class="related-course mb-3">
                                <div class="d-flex align-items-center">
                                    <img src="../img/python.png" alt="Python" class="me-3" width="40" height="40" style="object-fit: contain;">
                                    <div class="flex-grow-1">
                                        <h6 class="mb-1">Python Data Science</h6>
                                        <small class="text-muted">35 hours • Data Science</small>
                                    </div>
                                </div>
                            </div>
                            <a href="capacitaciones.html" class="btn btn-outline-primary btn-sm w-100">
                                View All Courses
                            </a>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </main>

    <!-- Enrollment Modal -->
    <div class="modal fade" id="enrollmentModal" tabindex="-1" aria-labelledby="enrollmentModalLabel" aria-hidden="true">
        <div class="modal-dialog">
            <div class="modal-content">
                <div class="modal-header">
                    <h5 class="modal-title" id="enrollmentModalLabel">
                        <i class="fas fa-graduation-cap me-2"></i>
                        Confirm Enrollment
                    </h5>
                    <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
                </div>
                <div class="modal-body">
                    <div class="text-center mb-4">
                        <i class="fas fa-check-circle fa-3x text-success mb-3"></i>
                        <h4>Perfect!</h4>
                        <p class="text-muted">You're about to enroll in:</p>
                        <h5 class="text-primary">Advanced React</h5>
                    </div>
                    
                    <div class="course-summary bg-light p-3 rounded mb-4">
                        <div class="row">
                            <div class="col-6">
                                <small class="text-muted">Duration:</small>
                                <p class="mb-0 fw-semibold">20 hours</p>
                            </div>
                            <div class="col-6">
                                <small class="text-muted">Level:</small>
                                <p class="mb-0 fw-semibold">Advanced</p>
                            </div>
                        </div>
                    </div>
                    
                    <div class="form-check mb-3">
                        <input class="form-check-input" type="checkbox" id="agreeTerms" required>
                        <label class="form-check-label" for="agreeTerms">
                            I agree to the <a href="terminos.html">terms and conditions</a> of the course
                        </label>
                    </div>
                </div>
                <div class="modal-footer">
                    <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Cancel</button>
                    <button type="button" class="btn btn-accent" id="confirmEnrollmentBtn">
                        <i class="fas fa-check me-2"></i>Confirm Enrollment
                    </button>
                </div>
            </div>
        </div>
    </div>

    <!-- Footer will be loaded dynamically -->

    <!-- Scripts -->
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/js/bootstrap.bundle.min.js"></script>
    <script src="https://code.jquery.com/jquery-3.6.0.min.js"></script>
    <script type="module">
        import { initNavigation } from '../js/navigation.js';
        import { showToast } from '../js/ui.js';
        import { getCurrentUser } from '../js/guards.js';
        
        // Sample course data (would normally come from URL parameters or API)
        const courseData = {
            id: 1,
            title: "Advanced React",
            subtitle: "Master advanced React concepts and build scalable applications",
            category: "Frontend",
            description: "In this advanced React course, you'll learn the deepest concepts and best practices for developing modern and scalable web applications. From custom hooks to performance optimization, this course will prepare you to become a React expert.",
            duration: "20 hours",
            lessons: 45,
            students: 1250,
            rating: 4.9,
            instructor: {
                name: "Carlos Mendoza",
                title: "Senior Frontend Developer",
                bio: "React specialist with 6+ years of experience developing applications for Fortune 500 companies.",
                avatar: "../img/ft carlos.jpeg",
                rating: 4.9,
                totalStudents: 2350,
                courses: 8
            },
            price: 0, // Free
            image: "../img/reactjs-inner.svg"
        };

        document.addEventListener('DOMContentLoaded', () => {
            // Initialize navigation with current page
            initNavigation('course-details', true);
            
            // Load course data
            loadCourseData();
            
            // Initialize event listeners
            initializeEventListeners();
        });

        function loadCourseData() {
            // Update course information
            document.getElementById('courseTitle').textContent = courseData.title;
            document.getElementById('courseSubtitle').textContent = courseData.subtitle;
            document.getElementById('courseCategoryBadge').textContent = courseData.category;
            document.getElementById('courseDescription').textContent = courseData.description;
        }

        function initializeEventListeners() {
            // Enrollment button
            document.getElementById('enrollBtn').addEventListener('click', () => {
                const user = getCurrentUser();
                if (!user) {
                    showToast('You must log in to enroll', 'warning');
                    window.location.href = 'login.html';
                    return;
                }
                
                const modal = new bootstrap.Modal(document.getElementById('enrollmentModal'));
                modal.show();
            });
            
            // Sidebar enrollment button
            document.getElementById('enrollBtnSidebar').addEventListener('click', () => {
                document.getElementById('enrollBtn').click();
            });

            // Confirm enrollment
            document.getElementById('confirmEnrollmentBtn').addEventListener('click', () => {
                const agreeTerms = document.getElementById('agreeTerms').checked;
                if (!agreeTerms) {
                    showToast('You must accept the terms and conditions', 'error');
                    return;
                }
                
                showToast('Enrollment successful! Redirecting to your courses...', 'success');
                
                const modal = bootstrap.Modal.getInstance(document.getElementById('enrollmentModal'));
                modal.hide();
                
                setTimeout(() => {
                    window.location.href = 'my-courses.html';
                }, 2000);
            });

            // Add to favorites
            document.getElementById('addToFavoritesBtn').addEventListener('click', () => {
                const btn = document.getElementById('addToFavoritesBtn');
                const icon = btn.querySelector('i');
                
                if (icon.classList.contains('far')) {
                    // Add to favorites
                    icon.classList.remove('far');
                    icon.classList.add('fas');
                    btn.classList.remove('btn-outline-primary');
                    btn.classList.add('btn-primary');
                    showToast('Course added to favorites', 'success');
                } else {
                    // Remove from favorites
                    icon.classList.remove('fas');
                    icon.classList.add('far');
                    btn.classList.remove('btn-primary');
                    btn.classList.add('btn-outline-primary');
                    showToast('Course removed from favorites', 'info');
                }
            });

            // Share course
            document.getElementById('shareBtn').addEventListener('click', () => {
                const shareData = {
                    title: courseData.title,
                    text: `Discover this amazing course: ${courseData.title}`,
                    url: window.location.href
                };
                
                if (navigator.share) {
                    navigator.share(shareData);
                } else {
                    // Fallback - copy to clipboard
                    navigator.clipboard.writeText(window.location.href).then(() => {
                        showToast('Link copied to clipboard', 'success');
                    });
                }
            });
        }
    </script>
</body>
</html>